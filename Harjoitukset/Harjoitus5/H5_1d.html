<html>
    <h2>Harjoitus 5.1.D</h2><br/>
    <form>
        <label for="id">ID number:</label><br/>
        <input type="text" id="id"><br><br>
        <label for="title">Post title:</label><br/>
        <input type="text" id="title"><br><br>
        <label for="body">Body:</label><br/>
        <input type="text" id="body"><br><br>
        <input type="button" value="Create" onclick="postFunc()">
    </form><br/>
    <p id="note"></p>
    <body>
        <script>
            function postFunc(){
                let inputId = document.getElementById("id").value;
                let inputTitle = document.getElementById("title").value;
                let inputBody = document.getElementById("body").value;
                fetch('https://jsonplaceholder.typicode.com/posts', {
                    method: 'POST',
                    body: JSON.stringify({
                        title: inputTitle,
                        body: inputBody,
                        userId: inputId,
                    }),

                    headers: {
                        'Content-type': 'application/json; charset=UTF-8',
                    },
                })

                .then((response) =>{
                    console.log(response.status)
                    response.json()
                    if(response.status==200,201){
                        document.getElementById("note").innerHTML="Viesti tallennettu!"
                    }
                    else {document.getElementById("note").innerHTML="Viesti ei tallentunut."}
                    })

                .then((json) => console.log(json));
            }

        </script>
    </body>
</html>