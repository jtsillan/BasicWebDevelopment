<html>
    <select id="posts" onchange="changeValues()"></select><br/><br/>

    <input type="text" id="titleText"><br/>
    <input type="text" id="bodyText"><br/>

    <button type="button" onclick="savePost()">Update</button>

    <body>
        <script>
            let htmlText = ""
            fetch('https://jsonplaceholder.typicode.com/posts')
                .then((response) => response.json())
                .then((json) => {
                     console.log(json)
                     json.forEach(createRow)
                     document.getElementById("posts").innerHTML = htmlText;
                     changeValues()
                });
                
                function createRow(value) {                    
                    htmlText += "<option value='" + value.id + "'>" + value.title + "</option>"
                }
                // B-kohta
                function changeValues() {
                    let chosen = document.getElementById("posts").value
                    console.log("changeValues() called")
                    console.log("chosen = " + chosen)
                    fetch('https://jsonplaceholder.typicode.com/posts/' + chosen)
                        .then((response) => response.json())
                        .then((json) => {
                            console.log(json)
                            document.getElementById("titleText").value = json.title;
                            document.getElementById("bodyText").value = json.body;
                        });
                }
                // C kohta
                function savePost() {
                    let chosenId = document.getElementById("posts").value;
                    let inputTitle = document.getElementById("titleText").value;
                    let inputBody = document.getElementById("bodyText").value;

                    fetch('https://jsonplaceholder.typicode.com/posts/' + chosenId, {
                        method: 'PUT',
                        body: JSON.stringify({
                            title: inputTitle,
                            body: inputBody,
                        }),
                        headers: {
                            'Content-type': 'application/json; charset=UTF-8',
                        },
                        })
                        .then((response) => {
                            console.log("Status = " + response.status)
                            response.json()
                        })
                        .then((json) => console.log(json));

                }
        </script>
    </body>
</html>